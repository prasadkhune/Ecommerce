(function(m){var w=window.AmazonUIPageJS||window.P,n=w._namespace||w.attributeErrors,e=n?n("DetailPageTwisterViewAsset",""):w;e.guardFatal?e.guardFatal(m)(e,window):e.execute(function(){m(e,window)})})(function(m,w,n){m.when("A","dp-refresh-handler","view-util","twister-string-constants","dp-interactive-page-refresh-handler","twister-dimension-subview-promise-handler","page-refresh-custom-params-handler").register("page-refresh-view",function(e,I,r,h,v,p,z){function x(p,a,x){function y(c){return{chunk:function(d){var c=
d.ASIN,k=d.Value;d=d.FeatureName;if(!g.hiddenFeatures[d]){var b=d,f,a;try{b&&k&&k.content&&(a=k.content[b],"undefined"!==typeof a&&(f=t("#"+b),f.html(a).removeClass("js-feature-refresh-overlay").css({opacity:""})))}catch(l){b=b||"NoFeatureName",D.logFatal(l,{message:"Error in feature"+b})}g.twisterRefreshHandler.stampFeature(b,c);"twister-slot-price_feature_div"==d&&(k=k?k.content:null,a=t(".swatchSelect .twisterSwatchPrice").html(),f=t(".swatchSelect .price_slot_ppu").html(),a&&k&&k.priceToSet&&
(a=e.trim(a),k.priceToSet!==a&&(t(".swatchSelect .twisterSwatchPrice").html(k.priceToSet),A("twisterUpdatePriceMismatch"))),f&&k&&k.hasPricePerUnit&&k.pricePerUnitDisplay&&(f=e.trim(f),k.pricePerUnitDisplay!==f&&(t(".swatchSelect .price_slot_ppu").html(k.pricePerUnitDisplay),A("twisterUpdatePricePerUnitMismatch"))));"desktop_configurator_price_mismatch_div"==d&&e.trigger("DesktopConfiguratorPriceMismatchDataUpdated",c)}},success:function(c,q,k){A("twisterUpdateSuccess");v.updateRenderTime()},error:function(c,
q,k){Twister.$("#variations-overlay").hide();A("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(c){D.logFatal("Ajax aborted: "+c)},timeout:4E4}}function u(c,d,q,k,b){var f=[];"parent"===c?(d=E(d,k,"parent",b),f.parent=d,d=E(q,k,"partial",b),f.partial=d):(d=E(q,k,c,b),f[c]=d);return f}function l(c,d,q,k,b){for(var f in c)if(c.hasOwnProperty(f)){if("full"===f){var a=q.dimensionType,l=g.twisterUtil.getDimensionInfo().length,
h=q.dimensionDisplayType,r=q.newAsin,y=b&&(e.state("dp-twister-csm")||{}).updateCSMPageTypeId;g.twisterRefreshHandler.startMeasurement(r,a,l,h,y?r:n,y?["is-twister","parentAsin-"+F]:n)}a=c[f].twisterRefreshParams;l=c[f].notifyClientParams;if(b){var u=!1;g.twisterRefreshHandler.doPageRefresh(null,a,d,k,function(b){b&&!b.isNewRequest&&(B(f),u=!0)},function(){!u&&B(f)})}L(l.asin,l.id,f,b)}}function B(c){t(g.config[c].affectedFeatures).addClass("js-feature-refresh-overlay").css({opacity:.5})}function M(){t.each(a.contextMetaData,
function(c,d){var q={};d=d.elementList||[];var k=d.length,b=[];q.click={};q.mouseOver={};for(var f=0;f<k;f++){var a=t("#"+d[f].divToUpdate);b.push("#"+d[f].divToUpdate);a.length&&d[f].customClientFunction&&(d[f].updateOnHover&&(q.mouseOver[d[f].divToUpdate]=a.attr("customfunctionname")),q.click[d[f].divToUpdate]=a.attr("customfunctionname"))}g.config[c].affectedFeatures=b.join(",");g.config[c].clientFeatures=q})}function L(c,d,a,k){var b="",b=k?h.EVENT_TYPE_CLICK:h.EVENT_TYPE_MOUSEOVER;t.each(g.config[a].clientFeatures[b],
function(b,k){try{var a=function(){g.twisterRefreshHandler.stampImageLoad(c)};(function(){var b={};b.P=m;(function(){eval("var P \x3d this.P;");eval("0, "+k)(d,DetailPage.StateController,a)}).call(b)})()}catch(q){D.logFatal("Client feature - "+b+", threw and exception :- "+q)}})}function E(c,d,a,k){var b={},f={};b.asinList=c;b.id="parent"===a?c:"partial"===k?d:c;b.mType=a;b=N(a,b);a=!1;(k=e.state("pwState"))&&(a=k.isTryState);a&&(b.isTryState=a);O(b,z.getCustomPageRefreshParams(c)||{});b=g.twisterRefreshHandler.createCustomParamsMap({},
b);f.asin=c;f.id=d;return{twisterRefreshParams:b,notifyClientParams:f}}function O(c,a){e.each(a,function(a,d){c[d]=a})}function N(c,d){t.each(a.contextMetaData[c].mTypeSpecificURLParams,function(c,a){d[c]=a});return d}function P(c){c=g.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(c.selected_variation_values);g.twisterUtil.isFullySelected(c)?g.currentPageSelectionState="full":g.currentPageSelectionState="partial"}function Q(c){var a={};a.config=c.measurement;a.dimensionDisplayType=c.dimensionsDisplayType;
a.storeID=c.storeID;a.productGroupID=c.productGroupID;return a}function R(a){a=a.immutableURLPrefix;var d=null;a&&-1!=a.indexOf("?")&&(a=a.split("?")[1],0<a.length&&(d={},a=a.split("\x26"),e.each(a,function(a){a=a.split("\x3d");d[a[0]]=a[1]})),d.isFlushing=2,d.dpEnvironment=Twister.dpEnvironment);return d}function G(a,d){var g;"partial"===a&&"partial"===d&&(g="partial");"partial"===a&&"full"===d&&(g="full");"full"===a&&"partial"===d&&(g="parent");"full"===a&&"full"===d&&(g="full");return g}var g=
this,F=a.parent_asin,C=w.ue,H="",D=new x("dpTwisterPageRefreshView");this.twisterUtil=p.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config={partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};g.viewUtil=new r(p);g.subType;var A=function(a){C&&C.count&&C.count(a,(C.count(a)||0)+1)};(function(){P(a);M();var c={featureName:g.twisterFeatureName},d=Q(a);g.twisterRefreshHandler=new I(c,null,d);c=R(a.twisterUpdateURLInfo);
g.twisterRefreshHandler.addParams(c);z.initialize();p.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(d,c){var b={};if(d!==h.METADATA){var b={},f;f=n;if(c)switch(d){case h.VARIATION_CHANGE:f=c.selected().selInfo;break;case h.VARIATION_PEEK:f=c.peek().selInfo}b.selectionInfo=f;b.dimensionCombination=g.viewUtil.getCurrDimCombId(b.selectionInfo,"_","X");f=g.twisterUtil.isFullySelected(b.dimensionCombination);b.childAsin=g.twisterUtil.getAsinFromSelectionInfo(b.selectionInfo,
f);b.newPageSelectionState=f?"full":"partial";b.mTypeForRefresh=G(g.currentPageSelectionState,b.newPageSelectionState);b.newAsin="parent"===b.mTypeForRefresh?F:b.childAsin;b.doNotAbort="parent"===b.mTypeForRefresh?!0:!1;b.twisterCallListParams=u(b.mTypeForRefresh,b.newAsin,b.childAsin,b.dimensionCombination,b.newPageSelectionState);b.optionsForTwisterRefresh=y(c);b.pageRefreshMeasure={newAsin:b.newAsin,dimensionType:H,dimensionDisplayType:a.dimensionsDisplayType}}switch(d){case h.VARIATION_CHANGE:g.subType!==
h.PRODUCTIZED_VIEW_SUBTYPE&&(l(b.twisterCallListParams,b.optionsForTwisterRefresh,b.pageRefreshMeasure,b.doNotAbort,!0),g.currentPageSelectionState=b.newPageSelectionState,g.subType=n);break;case h.METADATA:switch(c.subType){case h.DP_STATE_VIEW_SUBTYPE:H=c.divMetadata.dimDisplayType;break;case h.PRODUCTIZED_VIEW_SUBTYPE:g.subType=c.subType,b.dimensionCombination=c.newDimCombID,b.childAsin=c.childAsin,b.newAsin=c.newAsin,b.newPageSelectionState=g.twisterUtil.isFullySelected(b.dimensionCombination)?
"full":"partial",b.mTypeForRefresh=G(g.currentPageSelectionState,b.newPageSelectionState),b.doNotAbort="parent"===b.mTypeForRefresh?!0:!1,b.twisterCallListParams=u(b.mTypeForRefresh,b.newAsin,b.childAsin,b.dimensionCombination,b.newPageSelectionState),b.optionsForTwisterRefresh=y(c),b.pageRefreshMeasure={newAsin:b.newAsin,dimensionType:c.divMetaData?c.divMetaData.dimDisplayType:n,dimensionDisplayType:a.dimensionsDisplayType},l(b.twisterCallListParams,b.optionsForTwisterRefresh,b.pageRefreshMeasure,
b.doNotAbort,!0),g.currentPageSelectionState=b.newPageSelectionState}}}})})()}var t=e.$;p.registerDimensionSubView("page-refresh-view",x);return x});m.when("A").register("twister-common-constants",function(e){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},
SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",
SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",
PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});m.when("A").register("page-refresh-custom-params-handler",function(e){var m={};return{initialize:function(){e.on("updateCustomPageRefreshParams",
function(e,h,v){e&&h&&null!==v&&v!==n&&(m[e]||(m[e]={}),m[e][h]=v)})},getCustomPageRefreshParams:function(e){return m[e]||{}}}});"use strict";m.when("A","a-sheet","jQuery","ready").execute(function(e,m,r){e.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var e=r("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),m=e.find("#selected-format"),p=m.offset().left,n=Math.abs(m.width()),m=Math.max(document.documentElement.clientWidth,w.innerWidth||0),n=m-n,x=e.scrollLeft();(p>
n||0>=p)&&e.scrollLeft(x+p-m/3)})});m.when("A","view-util","twister-string-constants").register("hover-refresh-view",function(e,w,r){var h=e.$;return function(v,p,z){function x(){e.each(p.contextMetaData,function(e,m){var l={};e=e.elementList||[];var B=e.length;l.mouseOver=[];for(var h=0;h<B;h++)e[h].customClientFunction&&e[h].updateOnHover&&l.mouseOver.push(e[h].divToUpdate);a.clientFeatures[m]=l})}function t(n,u){e.each(a.clientFeatures[u][r.EVENT_TYPE_MOUSEOVER],function(a){try{var e=h("#"+a),
u;e.length&&(u=e.attr("customfunctionname"),function(){var a={};a.P=m;(function(){eval("var P \x3d this.P;");eval("0, "+u)(n,DetailPage.StateController)}).call(a)}())}catch(r){K.logFatal("Client feature - "+feature+", threw and exception :- "+r)}})}function J(e){e=a.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(e.selected_variation_values);a.twisterUtil.isFullySelected(e)?a.currentPageSelectionState="full":a.currentPageSelectionState="partial"}var a=this,K=new z("dpTwisterHoverRefreshView");
this.twisterUtil=v.util;this.twisterFeatureName="TwisterHover";this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};a.viewUtil=new w(v);a.subType=n;(function(){function m(e){e=a.viewUtil.getCurrDimCombId(e,"_","X");var l=a.twisterUtil.isFullySelected(e)?"full":"partial",h,n=a.currentPageSelectionState;"partial"===n&&"partial"===l&&(h="partial");"partial"===n&&"full"===l&&(h="full");"full"===n&&"partial"===l&&(h="parent");"full"===n&&"full"===l&&(h="full");l=
[h];"parent"===h&&(l=["parent","partial"]);return{clientFeatureToRefresh:l,dimensionCombination:e}}J(p);x();v.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(h,l){switch(h){case r.VARIATION_PEEK:var p={};h=l.peek().selInfo;p=m(h);e.each(p.clientFeatureToRefresh,function(a){t(p.dimensionCombination,a)});case r.VARIATION_CHANGE:a.subType!==r.PRODUCTIZED_VIEW_SUBTYPE&&(h=l.selected().selInfo,l=a.viewUtil.getCurrDimCombId(h,"_","X"),a.currentPageSelectionState=
a.twisterUtil.isFullySelected(l)?"full":"partial",a.subType=n);break;case r.METADATA:switch(l.subType){case r.PRODUCTIZED_VIEW_SUBTYPE:a.subType=l.subType,a.currentPageSelectionState=a.twisterUtil.isFullySelected(l.newDimCombID)?"full":"partial"}}}})})()}})});